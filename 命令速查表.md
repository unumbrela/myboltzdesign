# BoltzDesign å‘½ä»¤é€ŸæŸ¥è¡¨ ğŸ“

## ç¯å¢ƒæ¿€æ´»

```bash
conda activate boltz_design
```

---

## å¿«é€Ÿæµ‹è¯•å‘½ä»¤

### æœ€ç®€å•çš„æµ‹è¯•ï¼ˆå°åˆ†å­ï¼‰
```bash
python boltzdesign.py \
  --target_name 7v11 \
  --target_type small_molecule \
  --target_mols OQO \
  --gpu_id 0 \
  --design_samples 2 \
  --suffix test \
  --run_alphafold False
```

### DNA ç»“åˆè›‹ç™½
```bash
python boltzdesign.py \
  --target_name 5zmc \
  --target_type dna \
  --pdb_target_ids C,D \
  --gpu_id 0 \
  --design_samples 2 \
  --suffix dna \
  --run_alphafold False
```

### è›‹ç™½-è›‹ç™½ç›¸äº’ä½œç”¨
```bash
python boltzdesign.py \
  --target_name 1acb \
  --target_type protein \
  --pdb_target_ids B \
  --gpu_id 0 \
  --design_samples 3 \
  --suffix ppi \
  --run_alphafold False
```

---

## å®ç”¨æ£€æŸ¥å‘½ä»¤

### æ£€æŸ¥ GPU
```bash
nvidia-smi
python -c "import torch; print('CUDA:', torch.cuda.is_available())"
```

### æ£€æŸ¥å®‰è£…
```bash
bash verify_installation.sh
```

### æŸ¥çœ‹ç»“æœ
```bash
# æŸ¥çœ‹è®¾è®¡è´¨é‡
cat outputs/*/results_final/rmsd_results.csv

# åˆ—å‡ºæ‰€æœ‰è¾“å‡º
ls -lh outputs/

# æŸ¥çœ‹ç‰¹å®šç»“æœ
ls -lh outputs/small_molecule_7v11_test/results_final/predictions/
```

### å¯è§†åŒ–ç»“æ„
```bash
# ä½¿ç”¨ PyMOL
pymol outputs/*/results_final/predictions/*/*.cif

# æˆ–è€…
pymol outputs/small_molecule_7v11_test/results_final/*.cif
```

---

## å‚æ•°è°ƒä¼˜æ¨¡æ¿

### å¢åŠ ç»“åˆè›‹ç™½ç´§å¯†åº¦
```bash
--num_intra_contacts 4
```

### å¢å¼ºä¸ç›®æ ‡çš„ç›¸äº’ä½œç”¨
```bash
--num_inter_contacts 4
```

### è°ƒæ•´è›‹ç™½é•¿åº¦
```bash
--length_min 80 --length_max 120
```

### å¢åŠ è®¾è®¡å¤šæ ·æ€§
```bash
--design_samples 10
```

### ä¼˜åŒ–äºŒçº§ç»“æ„ï¼ˆæ›´å¤š Î²-æŠ˜å ï¼‰
```bash
--helix_loss_max -0.3 --helix_loss_min -0.6
```

### å¢åŠ ä¼˜åŒ–è¿­ä»£
```bash
--soft_iteration 100 --temp_iteration 60
```

---

## å¸¸ç”¨ç»„åˆå‘½ä»¤

### é«˜è´¨é‡è®¾è®¡ï¼ˆæ›´å¤šè¿­ä»£ï¼‰
```bash
python boltzdesign.py \
  --target_name 7v11 \
  --target_type small_molecule \
  --target_mols OQO \
  --gpu_id 0 \
  --design_samples 5 \
  --soft_iteration 100 \
  --temp_iteration 60 \
  --num_inter_contacts 4 \
  --suffix high_quality \
  --run_alphafold False
```

### ç´§å‡‘å‹ç»“åˆè›‹ç™½
```bash
python boltzdesign.py \
  --target_name 7v11 \
  --target_type small_molecule \
  --target_mols OQO \
  --gpu_id 0 \
  --design_samples 5 \
  --length_min 60 \
  --length_max 100 \
  --num_intra_contacts 4 \
  --suffix compact \
  --run_alphafold False
```

### ä½¿ç”¨æœ¬åœ° PDB
```bash
python boltzdesign.py \
  --target_name my_target \
  --pdb_path ~/data/my_protein.pdb \
  --target_type protein \
  --pdb_target_ids B,C \
  --binder_id A \
  --gpu_id 0 \
  --design_samples 3 \
  --suffix custom \
  --run_alphafold False
```

---

## å¹¶è¡Œè¿è¡Œ

### å¤š GPU å¹¶è¡Œ
```bash
# GPU 0
python boltzdesign.py --target_name 7v11 --suffix run1 --gpu_id 0 &

# GPU 1
python boltzdesign.py --target_name 5zmc --suffix run2 --gpu_id 1 &

# æŸ¥çœ‹åå°ä»»åŠ¡
jobs
```

### æ‰¹é‡è¿è¡Œè„šæœ¬
```bash
# åˆ›å»ºæ‰¹é‡è¿è¡Œè„šæœ¬
cat > batch_run.sh << 'EOF'
#!/bin/bash

targets=("7v11" "1a6m" "5zmc")
types=("small_molecule" "metal" "dna")
mols=("OQO" "ZN" "")

for i in ${!targets[@]}; do
    python boltzdesign.py \
      --target_name ${targets[$i]} \
      --target_type ${types[$i]} \
      --target_mols ${mols[$i]} \
      --gpu_id 0 \
      --design_samples 3 \
      --suffix batch_$i \
      --run_alphafold False
done
EOF

chmod +x batch_run.sh
./batch_run.sh
```

---

## è°ƒè¯•å‘½ä»¤

### æŸ¥çœ‹è¯¦ç»†å¸®åŠ©
```bash
python boltzdesign.py --help
```

### æµ‹è¯• Boltz å¯¼å…¥
```bash
python -c "import boltz; print('Boltz OK')"
```

### æ£€æŸ¥ PyRosetta
```bash
python -c "import pyrosetta; print('PyRosetta OK')"
```

### ç›‘æ§ GPU ä½¿ç”¨
```bash
watch -n 1 nvidia-smi
```

### æŸ¥çœ‹è¿›ç¨‹
```bash
ps aux | grep boltzdesign
```

---

## ç»“æœç­›é€‰

### æ‰¾åˆ°é«˜ç½®ä¿¡åº¦è®¾è®¡
```bash
# iptm > 0.5 ä¸” plddt > 0.7
grep -E "iptm.*0\.[5-9]|iptm.*[1-9]\." outputs/*/results_final/rmsd_results.csv
```

### ç»Ÿè®¡è®¾è®¡æ•°é‡
```bash
find outputs/ -name "*.cif" | wc -l
```

### æŒ‰è´¨é‡æ’åº
```bash
cat outputs/*/results_final/rmsd_results.csv | sort -t',' -k6 -rn
```

---

## Jupyter Notebook

### å¯åŠ¨ Notebook
```bash
jupyter notebook Boltzdesign1.ipynb
```

### åœ¨åå°è¿è¡Œ
```bash
nohup jupyter notebook --no-browser --port=8888 > jupyter.log 2>&1 &
```

### è¿œç¨‹è®¿é—®
```bash
# æœåŠ¡å™¨ç«¯
jupyter notebook --no-browser --port=8888

# æœ¬åœ°ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
ssh -N -L 8888:localhost:8888 user@server
# ç„¶åè®¿é—® http://localhost:8888
```

---

## æ¸…ç†å’Œç»´æŠ¤

### åˆ é™¤æ—§çš„è¾“å‡º
```bash
rm -rf outputs/small_molecule_7v11_test/
```

### æ¸…ç†ç¼“å­˜
```bash
rm -rf ~/.boltz/cache/
```

### æ£€æŸ¥ç£ç›˜ç©ºé—´
```bash
du -sh outputs/
df -h .
```

---

## è·å–æ›´å¤šå¸®åŠ©

```bash
# æŸ¥çœ‹å®Œæ•´æŒ‡å—
cat å¿«é€Ÿå¼€å§‹æŒ‡å—.md

# æŸ¥çœ‹å®‰è£…éªŒè¯
cat å®‰è£…éªŒè¯æŒ‡å—.md

# æŸ¥çœ‹ README
cat README.md
```

---

## å¿«é€Ÿå‚è€ƒ

| ä»»åŠ¡ | å‘½ä»¤ |
|------|------|
| æ¿€æ´»ç¯å¢ƒ | `conda activate boltz_design` |
| éªŒè¯å®‰è£… | `bash verify_installation.sh` |
| è¿è¡Œç¤ºä¾‹ | `python boltzdesign.py --target_name 7v11 --target_type small_molecule --target_mols OQO --gpu_id 0 --design_samples 2 --suffix test --run_alphafold False` |
| æŸ¥çœ‹ç»“æœ | `cat outputs/*/results_final/rmsd_results.csv` |
| å¯è§†åŒ– | `pymol outputs/*/results_final/predictions/*/*.cif` |
| æ£€æŸ¥ GPU | `nvidia-smi` |
| è·å–å¸®åŠ© | `python boltzdesign.py --help` |

---

**æç¤º**: å°†è¿™ä¸ªæ–‡ä»¶æ·»åŠ åˆ°ä¹¦ç­¾æˆ–æ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥é˜…ï¼
